### FlowNotes — Historical Development Prompts

**Note:** This project was reset to initial state on November 11, 2025. These prompts document the original development process. All implementation is preserved in branch `backup-before-reset-2025-11-11-175036`.

---

### Session 1: Initial Setup (Original Development)

1. "Create a Chrome extension called FlowNotes with Manifest V3"
2. "Add session piggyback to read Salesforce session cookie"
3. "Create background service worker to proxy API calls"
4. "Add popup UI to check session status"
5. "Generate extension icons (3 stacked wavy lines)"

---

### Session 2: Flow Builder Integration

6. "Detect when user is on Flow Builder page"
7. "Inject a draggable toolbar on the Flow canvas"
8. "Make toolbar position persist across page loads"
9. "Add a 'Note+' button to open a note popout window"

---

### Session 3: Note Persistence

10. "Create FlowNote__c custom object in Salesforce"
11. "Add 'Save & Close' button to save note to Salesforce"
12. "Handle Field-Level Security issues during save"
13. "Store note text and Flow ID"

---

### Session 4: Note Display

14. "Add 'Display' button to show all notes for current flow"
15. "Render notes at their saved positions"
16. "Make displayed notes draggable and editable"
17. "Add 'Update & Close' for editing existing notes"

---

### Session 5: Canvas Integration

18. "Make notes stay anchored to Flow canvas when panning"
19. "Hide notes when their anchor moves off-screen"
20. "Show notes again when anchor returns to view"
21. "Scale notes with canvas zoom"

---

### Session 6: Advanced Positioning

22. "Store four-corner SVG-local coordinates for notes"
23. "Use getScreenCTM() for accurate coordinate mapping"
24. "Handle iframe offsets for cross-frame positioning"
25. "Cache note dimensions for consistent sizing"

---

### Session 7: Scaling and Visibility

26. "Implement uniform per-axis scaling"
27. "Clamp scale values to prevent extreme sizes"
28. "Fix notes 'going crazy' at extreme zoom levels"
29. "Replace notes with icons at 40% and 20% zoom"

---

### Session 8: Polish and Debugging

30. "Add 'Hide' button to dismiss all notes"
31. "Add debug overlay for troubleshooting positioning"
32. "Create Git tag 'good-2025-11-10' for stable version"
33. "Update all documentation"

---

### Session 9: Issue Resolution

34. "Fix notes disappearing during canvas pan/zoom"
35. "Fix notes resizing when canvas moves"
36. "Preserve last known position when mapping fails"
37. "Remove icon display at extreme zoom levels"

---

### Session 10: Project Reset (November 11, 2025)

38. "Start this project over (Option 2: Keep structure, reset implementation)"
39. "Create backup branch: backup-before-reset-2025-11-11-175036"
40. "Reset content.js to minimal state"
41. "Reset FlowNote__c to minimal field set"
42. "Update all documentation for reset state"

---

### Key Learnings

**What Worked Well:**
- Session piggyback approach (no OAuth needed)
- Background worker as API proxy
- SVG coordinate transformation for canvas positioning
- Chrome storage for persisting scale/size data
- Shadow DOM for style isolation

**Challenges Encountered:**
- SVG coordinate mapping across zoom levels
- Note positioning stability during pan/zoom
- Frame offsets for cross-iframe rendering
- Field-Level Security in Salesforce
- Extreme zoom level handling

**Technical Patterns:**
- `getScreenCTM()` + `DOMPoint` for coordinate transforms
- `requestAnimationFrame` for smooth layout updates
- `MutationObserver` for detecting DOM changes
- `chrome.runtime.sendMessage` for content ↔ background communication
- Defensive coding with extensive null checks

---

### Backup Branches

All implementations are preserved:
- `backup-before-reset-2025-11-11-175036` — Latest full implementation
- `backup-pre-revert-2025-11-11` — Pre-revert state
- Tag: `good-2025-11-10` — Last known stable

To review:
```bash
git checkout backup-before-reset-2025-11-11-175036
git log --oneline --all --graph
```

---

### Starting Fresh

The project is now reset to initial state. You can:
1. Build features incrementally (recommended for learning)
2. Restore from backup (quick start)
3. Cherry-pick specific features from backup

See `RESTART_GUIDE.md` and `NEXT_STEPS.md` for guidance.
